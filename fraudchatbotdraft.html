<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Fraud Chatbot</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    body {
      padding: 2rem;
      background-color: #ffffff; /* White background */
      font-family: 'Poppins', sans-serif;
    }
    .header {
      text-align: center;
      margin-bottom: 2rem;
    }
    .header img {
      width: 150px; /* Adjust logo size */
      margin-bottom: 1rem;
    }
    h1 {
      color: #004a8d; /* AIB blue for the title */
      font-weight: 600;
      margin-bottom: 1rem;
    }
    .form-control {
      border-radius: 10px;
      border: 1px solid #ced4da; /* Light gray border */
    }
    .btn-primary {
      background-color: #004a8d; /* AIB blue for the button */
      border: none;
      border-radius: 10px;
      padding: 10px 20px;
      font-weight: 500;
    }
    .btn-primary:hover {
      background-color: #003366; /* Darker AIB blue on hover */
    }
    .result {
      margin-top: 1.5rem;
    }
    .alert {
      border-radius: 10px;
      padding: 1.5rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    .alert-danger {
      background-color: #ffebee; /* Light red background for fraud alerts */
      color: #c62828; /* Dark red text */
      border: 1px solid #ef9a9a;
    }
    .alert-success {
      background-color: #e8f5e9; /* Light green background for safe messages */
      color: #2e7d32; /* Dark green text */
      border: 1px solid #a5d6a7;
    }
    .alert-info {
      background-color: #e3f2fd; /* Light blue background for general info */
      color: #1565c0; /* Dark blue text */
      border: 1px solid #90caf9;
    }
    .spinner-border {
      display: none; /* Hide spinner by default */
    }
    a {
      color: #004a8d; /* AIB blue for links */
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="header">
    <img src="aib-logo.png" alt="AIB Logo">
    <h1>AI Fraud Chatbot</h1>
  </div>
  <form id="chat-form">
    <div class="mb-3">
      <label for="message" class="form-label">Enter your message:</label>
      <textarea class="form-control" id="message" rows="3" required></textarea>
    </div>
    <button type="submit" class="btn btn-primary">Analyze Message</button>
  </form>

  <div id="result" class="result">
    <div id="loading" class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <script>
    // Legitimate phone numbers for AIB Bank
    const phoneNumberDatabase = [
      '+353 (0) 1 6600311', // AIB Head Office
      '0818 72 00 00', // iBB Helpline (Ireland)
      '+353 1 641 4889', // iBB Helpline (Outside of Ireland)
      '0818 724 724', // Internet Banking (Ireland)
      '+353 (0) 1 771 24 24', // Internet Banking (Outside of Ireland)
      '0818 478833', // AIB Business Advisor Team (Ireland)
      '+353 (0)1 77 15618', // AIB Business Advisor Team (Outside of Ireland)
      '1800 242227', // Lost or stolen Credit Cards (Ireland)
      '+353 (0) 1 2695022', // Lost or stolen Credit Cards (Outside of Ireland)
      '1800 242227', // Lost or stolen ATM/Debit Cards (Ireland)
      '+353 (0) 1 2695022', // Lost or stolen ATM/Debit Cards (Outside of Ireland)
      '0818 404204', // Insurance
      '+353(0) 1 7724488' // AIB Commercial Finance (Invoice Finance)
    ];

    /**
     * Analyze the message to detect potential fraud indicators.
     */
    function analyzeMessageForFraud(message) {
      const lowerCaseMessage = message.toLowerCase();

      // Check for phone numbers in the message
      const phoneNumberRegex = /(\+?\d{1,4}?[-.\s]?\(?\d{1,3}?\)?[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9})/g;
      const phoneNumbersInMessage = message.match(phoneNumberRegex) || [];

      // Verify if any phone number in the message is legitimate
      const isLegitimateNumber = phoneNumbersInMessage.some(number => phoneNumberDatabase.includes(number));

      // Check if the message is about transaction confirmation
      const isTransactionConfirmation = lowerCaseMessage.includes('confirm transactions') || lowerCaseMessage.includes('verify transactions');

      // Check if sensitive information is requested
      const sensitiveKeywords = ['card number', 'password', 'login details', 'pin', 'digipass', 'card reader'];
      const isSensitiveInfoRequested = sensitiveKeywords.some(keyword => lowerCaseMessage.includes(keyword));

      // Keyword-based detection for fraud
      const fraudKeywords = ['urgent', 'account suspended', 'click here', 'transfer immediately'];
      const keywordMatch = fraudKeywords.some(keyword => lowerCaseMessage.includes(keyword));

      // Determine if the message is fraudulent
      if (isTransactionConfirmation && !isSensitiveInfoRequested) {
        return 'Message appears safe. AIB may contact you to confirm transactions.'; // Legitimate transaction confirmation
      } else if (keywordMatch || !isLegitimateNumber) {
        return 'Potential Fraud Detected';
      } else {
        return 'Message appears safe but stay vigilant.';
      }
    }

    /**
     * Simulate a chatbot response.
     */
    function getChatbotResponse(fraudAnalysis) {
      if (fraudAnalysis === 'Potential Fraud Detected') {
        return 'This message appears to be fraudulent. Do not provide any personal or financial information. Contact AIB immediately using one of the verified phone numbers below.';
      } else if (fraudAnalysis === 'Message appears safe. AIB may contact you to confirm transactions.') {
        return 'This message appears to be a legitimate request from AIB to confirm transactions. However, always verify the caller using a known number from AIB’s official website.';
      } else {
        return 'This message appears to be safe. However, always remain cautious and verify any requests for personal or financial information.';
      }
    }

    // Handle form submission
    document.getElementById('chat-form').addEventListener('submit', (event) => {
      event.preventDefault();
      const message = document.getElementById('message').value;

      // Show loading spinner
      document.getElementById('loading').style.display = 'block';

      // Simulate a delay for analysis
      setTimeout(() => {
        const fraudAnalysis = analyzeMessageForFraud(message);
        const chatbotResponse = getChatbotResponse(fraudAnalysis);

        // Hide loading spinner
        document.getElementById('loading').style.display = 'none';

        const resultDiv = document.getElementById('result');
        resultDiv.innerHTML = '';

        const alertDiv = document.createElement('div');
        alertDiv.className = `alert ${fraudAnalysis === 'Potential Fraud Detected' ? 'alert-danger' : fraudAnalysis.includes('safe') ? 'alert-success' : 'alert-info'}`;
        alertDiv.innerHTML = `
          <strong>${fraudAnalysis}</strong><br>
          ${chatbotResponse}<br><br>
          <strong>Important Notice:</strong> AIB NEVER requests any login or personal details via email. If you receive an email asking for your Internet Banking or iBusiness Banking details, please forward it to alert@aib.ie and delete the email immediately. Do not click on any links in the email.<br>
          <strong>Investment Scam Warning:</strong> AIB warns customers to verify contact details by checking the official company website and never to trust unsolicited investment offers, even if they appear to use legitimate AIB staff names. Be cautious of fake websites with investment products and time-sensitive offers.<br>
          <strong>Phone Scam Warning:</strong> Never download remote access software or provide codes from your Card Reader/Digipass on foot of a phone call. Verify the caller using a known number from AIB’s official website.<br>
          <strong>Payment Scam Prevention:</strong> Always verify account numbers independently using AIB’s official contact details. Do not rely on contact information provided in unsolicited messages. Cross-check email addresses to ensure they match legitimate formats.<br><br>
          <strong>Find your nearest branch:</strong> <a href="https://branches.aib.ie/search" target="_blank">here</a>.<br>
          <strong>Contact numbers:</strong> ${phoneNumberDatabase.join(', ')}
        `;

        resultDiv.appendChild(alertDiv);
      }, 1000); // Simulate a 1-second delay
    });
  </script>
</body>
</html>